function randCol(a,o,e,r){return"rgba("+Math.floor(Math.random()*a).toString()+","+Math.floor(Math.random()*o).toString()+","+Math.floor(Math.random()*e).toString()+","+r+")"}!function(a){a.fn.quietflow=function(o){function e(a){void 0!==v.speed?setTimeout(function(){x=requestAnimationFrame(a)},v.speed):x=requestAnimationFrame(a)}function r(){for(var a=0;a<c;a+=v.squareSize+1)for(var o=0;o<f;o+=v.squareSize+1)S.fillStyle=randCol(v.maxRed,v.maxGreen,v.maxBlue,1),S.fillRect(a,o,v.squareSize,v.squareSize);e(r)}function t(){(k+w>c||k+w<0)&&(w=-w),(B+y>f||B+y<0)&&(y=-y),k+=w,B+=y,S.fillStyle=v.backgroundCol,S.fillRect(0,0,c,f);for(var a=0;a<v.miniRadii;a++)for(var o=0;o<v.miniRadii;o++){var r=a/v.miniRadii*c,i=o/v.miniRadii*f,l=Math.sqrt(Math.pow(k-r,2)+Math.pow(B-i,2))/v.mainRadius;S.beginPath(),S.fillStyle=v.circleCol,S.arc(r,i,l,0,2*Math.PI,!0),S.closePath(),S.fill()}e(t)}function i(){S.fillStyle=v.backgroundCol,S.fillRect(0,0,c,f);for(var a=0;a<v.bounceBallCount;a++){var o=circleData[a];(o[0]+o[3]>c||o[0]+o[3]<0)&&(o[3]=-o[3]),(o[1]+o[4]>f||o[1]+o[4]<0)&&(o[4]=-o[4]),o[0]+=o[3],o[1]+=o[4],S.beginPath(),S.fillStyle=o[5],S.arc(o[0],o[1],o[2],0,2*Math.PI,!0),S.closePath(),S.fill()}e(i)}function l(){S.fillStyle=v.backgroundCol,S.fillRect(0,0,c,f),S.beginPath(),S.fillStyle=v.lineColor,S.arc(m,u,2,0,2*Math.PI,!0),S.closePath(),S.fill();for(var a=0;a<v.lines;a++)S.beginPath(),S.moveTo(m,u),S.lineTo(Math.random()*c,Math.random()*f),S.strokeStyle=v.lineColor,S.shadowColor=v.lineGlow,S.shadowBlur=20,S.stroke();e(l)}function n(){var a=S.createLinearGradient(0,0,c/2,f);a.addColorStop(0,"#333333"),a.addColorStop(1,"#000"),S.fillStyle=a,S.fillRect(0,0,c,f);for(var o=0;o<R.length;o++){var r=R[o];r[0]+=r[3],S.beginPath(),S.fillStyle=v.starColor,S.arc(r[0],r[1],r[2],0,2*Math.PI,!0),S.shadowColor="#FFF",S.shadowBlur=20,S.closePath(),S.fill(),r[0]>c&&(R.splice(o,1),R.unshift([Math.random()*c/4-c/4,Math.random()*f,Math.random()*v.starSize,Math.ceil(5*Math.random())]))}e(n)}function s(){S.beginPath();for(var a=[[0,0],[c,0],[0,f],[c,f]],o=0;o<4;o++){var r=Math.floor(Math.random()*v.specificColors.length);S.strokeStyle=v.specificColors.length>0?v.specificColors[r]:randCol(255,255,255),S.moveTo(a[o][0],a[o][1]),S.lineTo(Math.random()*c,Math.random()*f)}S.shadowColor=v.lineGlow,S.shadowBlur=20,S.stroke(),e(s)}function d(){S.fillStyle=v.backgroundCol,S.fillRect(0,0,c,f);for(var a=0;a<P.length;a++){var o=P[a];S.fillStyle=o[3],S.fillRect(o[0],o[1],o[2],o[2]),o[0]+=o[4],o[1]-=o[4],(o[0]>c+v.maxBoxSize||o[1]<-v.maxBoxSize)&&(P.splice(a,1),0==v.specificColors.length?P.push([Math.random()*c*2-c,Math.random()*f*2+f,Math.random()*v.maxBoxSize+1,randCol(255,255,255,v.transparent?.5:1),5*Math.random()]):P.push([Math.random()*c*2-c,Math.random()*f*2+f,Math.random()*v.maxBoxSize+1,v.specificColors[Math.floor(Math.random()*v.specificColors.length)],5*Math.random()]))}e(d)}var h=a(this),c=h.width(),f=h.height(),m=c/2,u=f/2;a("#Quietflow").remove();var M="starfield",p=["squareFlash","vortex","bouncingBalls","shootingLines","simpleGradient","starfield","layeredTriangles","cornerSpikes","floatingBoxes"],C={squareFlash:{squareSize:10,maxRed:255,maxGreen:255,maxBlue:255,speed:100},vortex:{mainRadius:20,miniRadii:30,backgroundCol:"#3498DB",circleCol:"#34495E",speed:10},bouncingBalls:{specificColors:[],backgroundCol:"#ECF0F1",maxRadius:40,bounceSpeed:50,bounceBallCount:50,transparent:!0},shootingLines:{backgroundCol:"#000",lineColor:"#FFF",speed:150,lineGlow:"#FFF",lines:50},simpleGradient:{primary:"#D4145A",accent:"#FBB03B"},starfield:{starColor:"#FFF",starSize:3,speed:100},layeredTriangles:{backgroundCol:"#D6D6D6",transparent:!0,specificColors:[],triangles:50},cornerSpikes:{specificColors:[],backgroundCol:"#FFF",lineColor:"#000",speed:100,lineGlow:"#FFF"},floatingBoxes:{specificColors:[],boxCount:400,maxBoxSize:80,backgroundCol:"#D6D6D6",transparent:!1,speed:100}},g=document.createElement("canvas"),S=g.getContext("2d");g.id="Quietflow",g.width=c,g.height=f,g.style.zIndex=-1e3,g.style.position="absolute",g.style.top=0;var b=h.attr("id");void 0!=b?document.getElementById(b).appendChild(g):document.body.appendChild(g),a.inArray(o.theme,p)>-1&&(M=o.theme);var v={};v=a.extend(C[M],o),a(window).resize(function(){c=h.width(),f=h.height();var o=a("#Quietflow").css("width").replace("px",""),e=a("#Quietflow").css("height").replace("px","");a("#Quietflow").css({width:window.innerWidth,height:window.innerHeight});var r=o/window.innerWidth,t=e/window.innerHeight;S.scale(r,t)});var x;switch(M){case"squareFlash":r();break;case"vortex":var w=2,y=4,k=c/2,B=f/2;t();break;case"bouncingBalls":circleData=[];for(z=0;z<v.bounceBallCount;z++)0==v.specificColors.length?circleData.push([Math.random()*c,Math.random()*f,Math.random()*v.maxRadius,2*Math.random(),4*Math.random(),randCol(255,255,255,v.transparent?.5:1)]):circleData.push([Math.random()*c,Math.random()*f,Math.random()*v.maxRadius,2*Math.random(),4*Math.random(),v.specificColors[Math.floor(Math.random()*v.specificColors.length)]]);i();break;case"shootingLines":l();break;case"simpleGradient":var F=S.createLinearGradient(0,0,c/2,f);F.addColorStop(0,v.primary),F.addColorStop(1,v.accent),S.fillStyle=F,S.fillRect(0,0,c,f);break;case"starfield":for(var R=[],z=0;z<700;z++)R.push([Math.random()*c*2-c,Math.random()*f,Math.random()*v.starSize,Math.ceil(5*Math.random())]);n();break;case"layeredTriangles":S.fillStyle=v.backgroundCol,S.fillRect(0,0,c,f);for(z=0;z<v.triangles;z++)S.beginPath(),S.moveTo(Math.random()*c,Math.random()*f),S.lineTo(Math.random()*c,Math.random()*f),S.lineTo(Math.random()*c,Math.random()*f),v.specificColors.length>0?S.fillStyle=v.specificColors[Math.floor(Math.random()*v.specificColors.length)]:S.fillStyle=randCol(255,255,255,.5),S.closePath(),S.fill();break;case"cornerSpikes":S.fillStyle=v.backgroundCol,S.fillRect(0,0,c,f),s();break;case"floatingBoxes":for(var P=[],z=0;z<v.boxCount;z++)0==v.specificColors.length?P.push([Math.random()*c*2-c,Math.random()*f,Math.random()*v.maxBoxSize+1,randCol(255,255,255,v.transparent?.5:1),5*Math.random()]):P.push([Math.random()*c*2-c,Math.random()*f,Math.random()*v.maxBoxSize+1,v.specificColors[Math.floor(Math.random()*v.specificColors.length)],5*Math.random()]);d()}}}(jQuery);